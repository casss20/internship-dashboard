<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internship Mission Control - Anthony Casseus</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#00e5a0">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;600&display=swap');

        :root {
            --bg: #0a0c10;
            --surface: #111318;
            --surface2: #181c23;
            --border: #1f2530;
            --accent: #00e5a0;
            --accent2: #0077ff;
            --warn: #f5a623;
            --danger: #ff4560;
            --text: #e8eaf0;
            --muted: #6b7280;
            --mono: 'Space Mono', monospace;
            --sans: 'DM Sans', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--sans);
            font-size: 14px;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .header-left h1 {
            font-family: var(--mono);
            font-size: 20px;
            font-weight: 700;
            color: var(--accent);
        }

        .header-left .subtitle {
            color: var(--muted);
            font-size: 12px;
            margin-top: 4px;
        }

        .status-pills {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .pill {
            font-family: var(--mono);
            font-size: 10px;
            padding: 4px 10px;
            border-radius: 20px;
            border: 1px solid var(--border);
            color: var(--muted);
        }

        .pill.active {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(0, 229, 160, 0.1);
        }

        /* Navigation */
        .nav {
            background: var(--surface2);
            border-bottom: 1px solid var(--border);
            padding: 0 30px;
            display: flex;
            gap: 0;
            overflow-x: auto;
        }

        .nav-item {
            padding: 12px 20px;
            font-family: var(--mono);
            font-size: 11px;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--muted);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-item:hover {
            color: var(--text);
        }

        .nav-item.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        /* Main Content */
        .main {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Cards */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .card-header {
            background: var(--surface2);
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-family: var(--mono);
            font-size: 11px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--accent);
        }

        .card-body {
            padding: 16px;
        }

        /* Live Feed */
        .live-feed {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            max-height: 400px;
            overflow-y: auto;
        }

        .live-item {
            display: flex;
            gap: 12px;
            padding: 10px;
            border-bottom: 1px solid var(--border);
            font-size: 13px;
        }

        .live-item:last-child {
            border-bottom: none;
        }

        .live-time {
            font-family: var(--mono);
            font-size: 10px;
            color: var(--muted);
            min-width: 60px;
        }

        .live-text {
            color: var(--text);
        }

        .live-text .highlight {
            color: var(--accent);
        }

        .live-text .working {
            color: var(--accent2);
        }

        .live-text .completed {
            color: var(--accent);
        }

        .live-text .alert {
            color: var(--danger);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        th {
            font-family: var(--mono);
            font-size: 10px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--muted);
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
            background: var(--surface2);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            color: var(--text);
        }

        tr:hover td {
            background: var(--surface2);
        }

        /* Action Buttons */
        .action-btn {
            font-family: var(--mono);
            font-size: 10px;
            padding: 4px 10px;
            border-radius: 4px;
            border: 1px solid var(--border);
            background: var(--surface2);
            color: var(--text);
            cursor: pointer;
            margin-right: 5px;
            text-decoration: none;
            display: inline-block;
        }

        .action-btn:hover {
            background: var(--border);
        }

        .action-btn.apply {
            border-color: var(--accent);
            color: var(--accent);
        }

        .action-btn.apply:hover {
            background: rgba(0, 229, 160, 0.1);
        }

        .action-btn.delete {
            border-color: var(--danger);
            color: var(--danger);
        }

        .action-btn.delete:hover {
            background: rgba(255, 69, 96, 0.1);
        }

        .action-btn.check {
            border-color: var(--accent);
            color: var(--accent);
        }

        .action-btn.check:hover {
            background: rgba(0, 229, 160, 0.2);
        }

        .action-btn.resume {
            border-color: var(--accent2);
            color: var(--accent2);
        }

        .action-btn.resume:hover {
            background: rgba(0, 119, 255, 0.1);
        }

        /* Badges */
        .badge {
            font-family: var(--mono);
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .badge-urgent {
            background: rgba(255, 69, 96, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .badge-ready {
            background: rgba(245, 166, 35, 0.2);
            color: var(--warn);
            border: 1px solid var(--warn);
        }

        .badge-submitted {
            background: rgba(0, 229, 160, 0.2);
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .badge-completed {
            background: rgba(0, 119, 255, 0.2);
            color: var(--accent2);
            border: 1px solid var(--accent2);
        }

        /* Editable textarea */
        .editable-area {
            width: 100%;
            min-height: 400px;
            background: var(--surface2);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 16px;
            color: var(--text);
            font-family: var(--mono);
            font-size: 12px;
            line-height: 1.8;
            resize: vertical;
        }

        .save-btn {
            margin-top: 10px;
            padding: 8px 16px;
            background: var(--accent);
            color: var(--bg);
            border: none;
            border-radius: 4px;
            font-family: var(--mono);
            font-size: 11px;
            cursor: pointer;
        }

        .save-btn:hover {
            opacity: 0.9;
        }

        /* Task items */
        .task-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: var(--surface2);
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .task-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .task-text {
            flex: 1;
        }

        .task-delete {
            color: var(--danger);
            cursor: pointer;
            font-size: 16px;
        }

        /* Stats */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--surface2);
            border-radius: 6px;
        }

        .stat-value {
            font-family: var(--mono);
            font-size: 28px;
            font-weight: 700;
            color: var(--accent);
        }

        .stat-value.warn {
            color: var(--warn);
        }

        .stat-value.danger {
            color: var(--danger);
        }

        .stat-label {
            font-size: 11px;
            color: var(--muted);
            margin-top: 4px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }

            .main {
                padding: 20px;
            }

            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <h1>INTERNSHIP MISSION CONTROL</h1>
            <div class="subtitle">Anthony Casseus ¬∑ UCF CS '27 ¬∑ Summer/Fall 2026</div>
        </div>
        <div class="status-pills">
            <span class="pill active">‚óè AGENT ACTIVE</span>
            <span class="pill active">‚óè LIVE FEED</span>
            <span class="pill" id="pending-count">0 PENDING</span>
        </div>
    </div>

    <!-- Navigation -->
    <div class="nav">
        <div class="nav-item active" data-page="dashboard">Command Center</div>
        <div class="nav-item" data-page="livefeed">Live Feed</div>
        <div class="nav-item" data-page="pending">To Apply (<span id="nav-pending">0</span>)</div>
        <div class="nav-item" data-page="applied">Applied (<span id="nav-applied">0</span>)</div>
        <div class="nav-item" data-page="tasks">Tasks</div>
        <div class="nav-item" data-page="rules">Rules</div>
        <div class="nav-item" data-page="materials">Materials</div>
    </div>

    <!-- Main Content -->
    <div class="main">

        <!-- PAGE 1: Command Center -->
        <div id="dashboard" class="page-section active">
            <div class="grid">
                <!-- Priority Metrics -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Priority Metrics</span>
                    </div>
                    <div class="card-body">
                        <div class="stat-grid">
                            <div class="stat-item">
                                <div class="stat-value danger" id="stat-urgent">0</div>
                                <div class="stat-label">To Apply</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="stat-applied">0</div>
                                <div class="stat-label">Applied</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value warn" id="stat-interviews">0</div>
                                <div class="stat-label">Interviews</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="stat-total">0</div>
                                <div class="stat-label">Total Tracked</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Priority -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Today's Priority</span>
                    </div>
                    <div class="card-body">
                        <div
                            style="background: rgba(255, 69, 96, 0.1); border: 1px solid var(--danger); border-radius: 6px; padding: 15px; margin-bottom: 15px;">
                            <div style="font-weight: 600; color: var(--danger); margin-bottom: 8px;">üî¥ Apply to These
                                NOW</div>
                            <ul id="priority-list" style="margin: 0; padding-left: 20px; color: var(--text);"></ul>
                        </div>
                        <div style="font-size: 12px; color: var(--muted);">
                            Last updated: <span id="last-updated">Just now</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Activity Preview -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Recent Activity</span>
                    <a href="#" onclick="showPage('livefeed')" style="font-size: 11px; color: var(--accent);">View Full
                        Feed ‚Üí</a>
                </div>
                <div class="card-body">
                    <div id="recent-activity"></div>
                </div>
            </div>
        </div>

        <!-- PAGE 2: Live Feed -->
        <div id="livefeed" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üî¥ Live Feed - What Kimi Claw Is Doing Right Now</span>
                    <span style="font-size: 11px; color: var(--muted);">Auto-refreshes every 30 seconds</span>
                </div>
                <div class="card-body">
                    <div class="live-feed" id="full-live-feed"></div>
                </div>
            </div>
        </div>

        <!-- PAGE 3: To Apply -->
        <div id="pending" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">To Apply (<span id="pending-count-header">0</span>)</span>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="pending-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Company</th>
                                    <th>Role</th>
                                    <th>Location</th>
                                    <th>Resume</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pending-tbody">
                                <!-- Dynamically populated from data/tracker.json -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 4: Applied -->
        <div id="applied" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Applied (<span id="applied-count-header">0</span>)</span>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="applied-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Company</th>
                                    <th>Role</th>
                                    <th>Date Applied</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="applied-tbody">
                                <!-- Dynamically populated -->
                            </tbody>
                        </table>
                    </div>
                    <div id="no-applied" style="text-align: center; padding: 40px; color: var(--muted);">
                        <div style="font-size: 48px; margin-bottom: 15px;">üìã</div>
                        <div>No applications submitted yet.</div>
                        <div style="font-size: 12px; margin-top: 10px;">Click "‚úì Applied" on the To Apply page to move
                            items here.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 5: Tasks -->
        <div id="tasks" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">Tasks</span>
                    <button class="action-btn" onclick="addTask()">+ Add Task</button>
                </div>
                <div class="card-body">
                    <div id="task-list">
                        <!-- Dynamically populated from data/tasks.json -->
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 6: Networking -->
        <div id="networking" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">ü§ù Networking Outreach</span>
                    <button class="action-btn" onclick="addContact()">+ Add Contact</button>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="network-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Recruiter</th>
                                    <th>Company</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>Follow-up</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="network-tbody">
                                <!-- Dynamically populated from data/contacts.json -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 7: Map -->
        <div id="map" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üó∫Ô∏è Job Locations</span>
                </div>
                <div class="card-body">
                    <div id="map-container"
                        style="height: 500px; border-radius: 6px; background: var(--surface2); display: flex; align-items: center; justify-content: center;">
                        <div style="text-align: center; color: var(--muted);">
                            <div style="font-size: 48px; margin-bottom: 15px;">üó∫Ô∏è</div>
                            <div>Map View Coming Soon</div>
                            <div style="font-size: 12px; margin-top: 10px;">Will show job locations with pins</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 8: Rules -->
        <div id="rules" class="page-section">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">üìã Agent Rules & Instructions (EDITABLE)</span>
                    <button class="save-btn" onclick="saveRules()">Save Changes</button>
                </div>
                <div class="card-body">
                    <textarea class="editable-area" id="rules-content">
# KIMI CLAW - INTERNHIP AGENT RULES
# Edit these instructions to change how I work

## ROLE
You are my dedicated, autonomous internship application agent. Your job is to find and apply to Summer 2026 and Fall 2026 internships that match my profile with minimal input from me.

## PROFILE
- Name: Anthony Casseus
- School: University of Central Florida
- Degree: B.S. Computer Science (Minor: Cyber Operations)
- GPA: 3.0
- Graduation: May 2027
- Location: Orlando, FL
- Work Auth: U.S. Citizen

## TARGET ROLES
- Software Engineering Intern
- AI/ML Engineering Intern
- Cybersecurity Intern
- Data Science Intern

## TARGET LOCATIONS
- Remote (preferred)
- Hybrid
- Orlando, FL
- Willing to relocate

## MUST-HAVE FILTERS
- Paid internships only
- Summer 2026 OR Fall 2026
- Undergraduate level
- Technical role (SWE, AI/ML, Cyber, Data)

## EXCLUDE
- Unpaid internships
- Roles requiring active security clearance
- Non-technical roles
- 5+ YOE requirements

## AUTOMATED TASKS
1. Search daily for new opportunities
2. Score matches against my profile (80%+ only)
3. Tailor resume for each role
4. Generate personalized cover letters
5. Track all applications
6. Send daily/weekly reports

## HUMAN-IN-THE-LOOP (Alert me when:)
- Email verification required
- 2FA/phone verification needed
- Assessment/OA invitation received
- Interview scheduled
- Offer received
- Missing info not in materials
- Deadline under 48 hours

## COLD EMAIL STRATEGY
- Find recruiter emails via Hunter.io/Apollo
- Send personalized 5-sentence emails
- One follow-up after 5 days
- Track all outreach

## COMMUNICATION
- Send updates via Telegram
- Update dashboard in real-time
- Alert immediately for urgent items

## DATA FILES
- Tracker: data/tracker.json (add new companies here)
- Feed: data/feed.json (add activity logs here)
- Tasks: data/tasks.json (add tasks here)
- Contacts: data/contacts.json (add contacts here)
- Materials: data/materials.json (add materials here)
- Cover letters: materials/cover_letters/
                    </textarea>
                </div>
            </div>
        </div>

        <!-- PAGE 9: Materials -->
        <div id="materials" class="page-section">
            <div class="grid">
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Application Materials</span>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>File</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="materials-tbody">
                                <!-- Dynamically populated from data/materials.json -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-title">Tailored Cover Letters</span>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Company</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="coverletters-tbody">
                                <!-- Dynamically populated from data/materials.json -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ============================================================
        // DATA LAYER ‚Äî All data loaded from JSON files
        // localStorage is used to persist user changes (mark applied, etc.)
        // Agents only need to edit the JSON files in data/ to update content.
        // ============================================================

        let trackerData = [];
        let feedData = [];
        let tasksData = [];
        let contactsData = [];
        let materialsData = { files: [], coverLetters: [] };

        // Load all data and render
        async function initDashboard() {
            try {
                const [trackerRes, feedRes, tasksRes, contactsRes, materialsRes] = await Promise.all([
                    fetch('data/tracker.json'),
                    fetch('data/feed.json'),
                    fetch('data/tasks.json'),
                    fetch('data/contacts.json'),
                    fetch('data/materials.json')
                ]);

                trackerData = await trackerRes.json();
                feedData = await feedRes.json();
                tasksData = await tasksRes.json();
                contactsData = await contactsRes.json();
                materialsData = await materialsRes.json();

                // Apply localStorage overrides (user actions like marking applied)
                applyLocalOverrides();

                // Render everything
                renderPendingTable();
                renderAppliedTable();
                renderFeed();
                renderTasks();
                renderContacts();
                renderMaterials();
                renderPriorityList();
                updateCounts();

            } catch (err) {
                console.error('Failed to load data:', err);
            }
        }

        // ============================================================
        // LOCAL STORAGE OVERRIDES
        // ============================================================

        function applyLocalOverrides() {
            // Applied overrides: list of IDs the user marked as applied
            const appliedIds = JSON.parse(localStorage.getItem('appliedIds') || '[]');
            const appliedDates = JSON.parse(localStorage.getItem('appliedDates') || '{}');
            appliedIds.forEach(id => {
                const item = trackerData.find(t => t.id === id);
                if (item) {
                    item.status = 'applied';
                    item.dateApplied = appliedDates[id] || new Date().toLocaleDateString();
                }
            });

            // Task overrides
            const savedTasks = localStorage.getItem('tasksOverride');
            if (savedTasks) {
                tasksData = JSON.parse(savedTasks);
            }

            // Contact overrides
            const savedContacts = localStorage.getItem('contactsOverride');
            if (savedContacts) {
                contactsData = JSON.parse(savedContacts);
            }
        }

        function saveAppliedState() {
            const appliedIds = trackerData.filter(t => t.status === 'applied').map(t => t.id);
            const appliedDates = {};
            trackerData.filter(t => t.status === 'applied').forEach(t => {
                appliedDates[t.id] = t.dateApplied;
            });
            localStorage.setItem('appliedIds', JSON.stringify(appliedIds));
            localStorage.setItem('appliedDates', JSON.stringify(appliedDates));
        }

        function saveTasksState() {
            localStorage.setItem('tasksOverride', JSON.stringify(tasksData));
        }

        function saveContactsState() {
            localStorage.setItem('contactsOverride', JSON.stringify(contactsData));
        }

        // ============================================================
        // RENDER FUNCTIONS
        // ============================================================

        function renderPendingTable() {
            const tbody = document.getElementById('pending-tbody');
            const pending = trackerData.filter(t => t.status === 'pending');
            let num = 0;
            tbody.innerHTML = pending.map(item => {
                num++;
                const emoji = item.priority === 'high' && item.matchScore ? 'üî• ' : '';
                const scoreCell = item.matchScore
                    ? `<span class="badge badge-ready">${item.matchScore}%</span>`
                    : `<button class="action-btn resume" onclick="viewResume('${item.company}')">View Resume</button>`;
                return `
                <tr data-id="${item.id}">
                    <td>${num}</td>
                    <td><strong>${emoji}${item.company}</strong></td>
                    <td>${item.role}</td>
                    <td>${item.location}</td>
                    <td>${scoreCell}</td>
                    <td>
                        <a href="${item.applyUrl}" target="_blank" class="action-btn apply">Apply ‚Üí</a>
                        <button class="action-btn check" onclick="markApplied(${item.id})">‚úì Applied</button>
                    </td>
                </tr>`;
            }).join('');
        }

        function renderAppliedTable() {
            const tbody = document.getElementById('applied-tbody');
            const applied = trackerData.filter(t => t.status === 'applied');
            let num = 0;
            tbody.innerHTML = applied.map(item => {
                num++;
                return `
                <tr>
                    <td>${num}</td>
                    <td><strong>${item.company}</strong></td>
                    <td>${item.role}</td>
                    <td>${item.dateApplied || '-'}</td>
                    <td><span class="badge badge-submitted">Applied</span></td>
                    <td><button class="action-btn delete" onclick="unmarkApplied(${item.id})">‚úï Undo</button></td>
                </tr>`;
            }).join('');

            document.getElementById('no-applied').style.display = applied.length > 0 ? 'none' : 'block';
        }

        function renderFeed() {
            const fullFeed = document.getElementById('full-live-feed');
            const recentActivity = document.getElementById('recent-activity');

            const feedHtml = feedData.map(entry => {
                let cls = '';
                if (entry.type === 'completed') cls = 'completed';
                else if (entry.type === 'working') cls = 'working';
                else if (entry.type === 'highlight') cls = 'highlight';
                else if (entry.type === 'alert') cls = 'alert';

                const prefix = entry.type === 'completed' ? '‚úì ' : entry.type === 'working' ? '‚Üí ' : '';
                return `
                <div class="live-item">
                    <span class="live-time">${entry.time}</span>
                    <span class="live-text"><span class="${cls}">${prefix}${entry.text}</span></span>
                </div>`;
            }).join('');

            fullFeed.innerHTML = feedHtml;

            // Show first 2 in the command center preview
            const previewHtml = feedData.slice(0, 2).map(entry => {
                let cls = entry.type === 'completed' ? 'completed' : entry.type === 'highlight' ? 'highlight' : '';
                return `
                <div class="live-item">
                    <span class="live-time">${entry.time}</span>
                    <span class="live-text"><span class="${cls}">${entry.text}</span></span>
                </div>`;
            }).join('');
            recentActivity.innerHTML = previewHtml;
        }

        function renderTasks() {
            const list = document.getElementById('task-list');
            list.innerHTML = tasksData.map(task => `
                <div class="task-item" data-task-id="${task.id}">
                    <input type="checkbox" class="task-checkbox" ${task.done ? 'checked' : ''} onchange="toggleTask(${task.id})">
                    <span class="task-text" style="${task.done ? 'text-decoration: line-through; opacity: 0.5;' : ''}">${task.text}</span>
                    <span class="task-delete" onclick="deleteTask(${task.id})">‚úï</span>
                </div>
            `).join('');
        }

        function renderContacts() {
            const tbody = document.getElementById('network-tbody');
            tbody.innerHTML = contactsData.map((c, i) => `
                <tr data-network-id="${c.id}">
                    <td>${i + 1}</td>
                    <td>${c.name}</td>
                    <td>${c.company}</td>
                    <td>${c.email}</td>
                    <td><span class="badge ${c.status === 'Sent' ? 'badge-submitted' : 'badge-ready'}">${c.status}</span></td>
                    <td>${c.followUp || '-'}</td>
                    <td>
                        <button class="action-btn apply" onclick="sendEmail(${c.id})">Send Email</button>
                        <button class="action-btn delete" onclick="deleteContact(${c.id})">‚úï</button>
                    </td>
                </tr>
            `).join('');
        }

        function renderMaterials() {
            const mtbody = document.getElementById('materials-tbody');
            mtbody.innerHTML = materialsData.files.map(f => `
                <tr>
                    <td>${f.name}</td>
                    <td style="color: var(--accent);">‚úÖ ${f.status}</td>
                    <td><button class="action-btn" onclick="viewFile('${f.path}')">${f.status === 'Complete' ? 'View' : 'Edit'}</button></td>
                </tr>
            `).join('');

            const clbody = document.getElementById('coverletters-tbody');
            clbody.innerHTML = materialsData.coverLetters.map(cl => `
                <tr>
                    <td>${cl.company}</td>
                    <td><button class="action-btn resume" onclick="viewCoverLetter('${cl.key}')">View</button></td>
                </tr>
            `).join('');
        }

        function renderPriorityList() {
            const list = document.getElementById('priority-list');
            const highPriority = trackerData.filter(t => t.status === 'pending' && t.priority === 'high');
            const normalPriority = trackerData.filter(t => t.status === 'pending' && t.priority === 'normal').slice(0, 7);
            
            let html = '';
            
            if (highPriority.length > 0) {
                html += '<div style="font-weight: 600; color: var(--danger); margin-bottom: 8px;">üî¥ High Priority (Cover Letters Ready)</div><ul style="margin: 0 0 15px 0; padding-left: 20px; color: var(--text);">';
                html += highPriority.map(t => `<li>${t.company} - ${t.role}</li>`).join('');
                html += '</ul>';
            }
            
            if (normalPriority.length > 0) {
                html += '<div style="font-weight: 600; color: var(--warn); margin-bottom: 8px;">üü° More Opportunities</div><ul style="margin: 0; padding-left: 20px; color: var(--text); font-size: 12px;">';
                html += normalPriority.map(t => `<li>${t.company} - ${t.role} (${t.matchScore || '--'}%)</li>`).join('');
                html += '</ul>';
            }
            
            html += '<div style="margin-top: 15px; font-size: 12px;"><a href="#" onclick="showPage(\'pending\')" style="color: var(--accent);">‚Üí View all 40 opportunities</a></div>';
            
            list.innerHTML = html;
        }

        // ============================================================
        // NAVIGATION
        // ============================================================

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function () {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                const pageId = this.getAttribute('data-page');
                document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
            });
        });

        function showPage(pageId) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
        }

        // ============================================================
        // ACTIONS
        // ============================================================

        function markApplied(id) {
            const item = trackerData.find(t => t.id === id);
            if (item) {
                item.status = 'applied';
                item.dateApplied = new Date().toLocaleDateString();
                saveAppliedState();
                renderPendingTable();
                renderAppliedTable();
                renderPriorityList();
                updateCounts();
                addLiveActivity(`Applied to ${item.company} - moved to Applied section`);
            }
        }

        function unmarkApplied(id) {
            const item = trackerData.find(t => t.id === id);
            if (item) {
                item.status = 'pending';
                item.dateApplied = null;
                saveAppliedState();
                renderPendingTable();
                renderAppliedTable();
                renderPriorityList();
                updateCounts();
                addLiveActivity(`Moved ${item.company} back to pending`);
            }
        }

        function updateCounts() {
            const pending = trackerData.filter(t => t.status === 'pending').length;
            const applied = trackerData.filter(t => t.status === 'applied').length;
            const total = trackerData.length;
            document.getElementById('stat-urgent').textContent = pending;
            document.getElementById('stat-applied').textContent = applied;
            document.getElementById('stat-total').textContent = total;
            document.getElementById('pending-count').textContent = pending + ' PENDING';
            document.getElementById('pending-count-header').textContent = pending;
            document.getElementById('applied-count-header').textContent = applied;
            document.getElementById('nav-pending').textContent = pending;
            document.getElementById('nav-applied').textContent = applied;
        }

        // Tasks
        function toggleTask(id) {
            const task = tasksData.find(t => t.id === id);
            if (task) {
                task.done = !task.done;
                saveTasksState();
                renderTasks();
            }
        }

        function deleteTask(id) {
            tasksData = tasksData.filter(t => t.id !== id);
            saveTasksState();
            renderTasks();
            addLiveActivity('Deleted task');
        }

        function addTask() {
            const text = prompt('Enter new task:');
            if (text) {
                const maxId = tasksData.length > 0 ? Math.max(...tasksData.map(t => t.id)) : 0;
                tasksData.push({ id: maxId + 1, text, done: false });
                saveTasksState();
                renderTasks();
                addLiveActivity('Added new task: ' + text);
            }
        }

        // Rules
        function saveRules() {
            const content = document.getElementById('rules-content').value;
            localStorage.setItem('agentRules', content);
            addLiveActivity('Saved agent rules changes');
            alert('Rules saved!');
        }

        function loadRules() {
            const saved = localStorage.getItem('agentRules');
            if (saved) {
                document.getElementById('rules-content').value = saved;
            }
        }

        // Live activity
        function addLiveActivity(text) {
            const entry = { time: new Date().toLocaleTimeString(), text, type: 'completed' };
            feedData.unshift(entry);
            renderFeed();
        }

        // View functions
        function viewResume(company) {
            alert(`Resume for ${company}:\n\nUse your uploaded PDF: Anthony_Casseus_Resume_FINAL_viual.pdf\n\nCover letter location: materials/cover_letters/${company}_CoverLetter.txt`);
        }

        function viewCoverLetter(company) {
            alert(`Cover letter for ${company}:\n\nLocation: materials/cover_letters/${company}_CoverLetter.txt`);
        }

        function viewFile(filename) {
            alert(`File: ${filename}\n\nLocation: materials/${filename}`);
        }

        // Contacts
        function addContact() {
            const name = prompt('Recruiter name:');
            const company = prompt('Company:');
            const email = prompt('Email:');
            if (name && company && email) {
                const maxId = contactsData.length > 0 ? Math.max(...contactsData.map(c => c.id)) : 0;
                contactsData.push({ id: maxId + 1, name, company, email, status: 'Not Sent', followUp: null });
                saveContactsState();
                renderContacts();
                addLiveActivity(`Added recruiter contact: ${name} at ${company}`);
            }
        }

        function deleteContact(id) {
            if (confirm('Delete this contact?')) {
                contactsData = contactsData.filter(c => c.id !== id);
                saveContactsState();
                renderContacts();
                addLiveActivity('Deleted recruiter contact');
            }
        }

        function sendEmail(id) {
            const contact = contactsData.find(c => c.id === id);
            if (contact) {
                alert(`Open your email client and send to: ${contact.email}\n\nCover letter location: materials/cover_letters/${contact.company}_CoverLetter.txt`);
                contact.status = 'Sent';
                saveContactsState();
                renderContacts();
                addLiveActivity(`Marked email as sent to ${contact.company}`);
            }
        }

        // Notifications
        function checkDeadlines() {
            const pending = trackerData.filter(t => t.status === 'pending' && t.priority === 'high');
            if (pending.length > 0 && Notification.permission === 'granted') {
                new Notification('URGENT: Applications pending', {
                    body: `${pending.length} high-priority applications waiting!`,
                    icon: '/icon-192.png'
                });
            }
        }

        if ('Notification' in window) {
            Notification.requestPermission();
        }

        setInterval(checkDeadlines, 60000);

        // Export tracker
        function exportTracker() {
            const dataStr = JSON.stringify(trackerData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tracker_export.json';
            a.click();
            URL.revokeObjectURL(url);
            addLiveActivity('Tracker data exported as JSON');
        }

        // ============================================================
        // INITIALIZE
        // ============================================================
        loadRules();
        initDashboard();

        // Auto-refresh timestamp
        setInterval(() => {
            document.getElementById('last-updated').textContent = 'Just now';
        }, 30000);
    </script>
</body>

</html>